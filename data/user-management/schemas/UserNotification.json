{
  "@type": "Schema",
  "@context": "https://rocketschema.org/context",
  "name": "UserNotification",
  "description": "Manages notifications and alerts sent to users within the application. This entity handles all types of user communications including system alerts, security warnings, updates about their account, and activity notifications. Notifications can be delivered through multiple channels (in-app, email, SMS, push) and have different priority levels. They track whether a user has read or dismissed them, support action buttons for quick responses, and can expire after a certain time. This is essential for keeping users informed about important events, required actions, or changes that affect them. The system uses this to ensure users never miss critical information while avoiding notification fatigue.",
  "properties": [
    {
      "name": "user",
      "type": "User",
      "mode": "stored",
      "description": "The user who will receive this notification",
      "required": true
    },
    {
      "name": "type",
      "type": "string",
      "mode": "enum",
      "description": "Category of notification for filtering and display",
      "enum": [
        "info",
        "warning",
        "error",
        "success",
        "security",
        "system"
      ],
      "required": true,
      "example": "info"
    },
    {
      "name": "category",
      "type": "string",
      "mode": "stored",
      "description": "Specific category for grouping similar notifications",
      "required": true,
      "example": "account"
    },
    {
      "name": "title",
      "type": "string",
      "mode": "stored",
      "description": "Short headline that appears in notification lists",
      "required": true,
      "example": "Password Changed Successfully"
    },
    {
      "name": "message",
      "type": "string",
      "mode": "stored",
      "description": "Full notification content with details",
      "required": true
    },
    {
      "name": "priority",
      "type": "string",
      "mode": "enum",
      "description": "Urgency level determining display order and delivery method",
      "enum": [
        "low",
        "medium",
        "high",
        "urgent"
      ],
      "default": "medium",
      "example": "high"
    },
    {
      "name": "channel",
      "type": "string",
      "mode": "enum",
      "description": "How the notification is delivered",
      "enum": [
        "in_app",
        "email",
        "sms",
        "push",
        "webhook"
      ],
      "default": "in_app",
      "example": "in_app"
    },
    {
      "name": "status",
      "type": "string",
      "mode": "enum",
      "description": "Current state of the notification",
      "enum": [
        "pending",
        "sent",
        "delivered",
        "read",
        "failed",
        "dismissed"
      ],
      "default": "pending",
      "example": "sent"
    },
    {
      "name": "sentAt",
      "type": "DateTime",
      "mode": "stored",
      "description": "When the notification was sent"
    },
    {
      "name": "deliveredAt",
      "type": "DateTime",
      "mode": "stored",
      "description": "When the notification reached the user"
    },
    {
      "name": "readAt",
      "type": "DateTime",
      "mode": "stored",
      "description": "When the user opened/read the notification"
    },
    {
      "name": "dismissedAt",
      "type": "DateTime",
      "mode": "stored",
      "description": "When the user dismissed without reading"
    },
    {
      "name": "expiresAt",
      "type": "DateTime",
      "mode": "stored",
      "description": "When the notification becomes irrelevant and should be hidden"
    },
    {
      "name": "actionUrl",
      "type": "string",
      "mode": "stored",
      "description": "Link to related page or action",
      "format": "uri"
    },
    {
      "name": "actionLabel",
      "type": "string",
      "mode": "stored",
      "description": "Text for the action button",
      "example": "View Details"
    },
    {
      "name": "data",
      "type": "object",
      "mode": "stored",
      "description": "Additional structured data for the notification"
    },
    {
      "name": "retryCount",
      "type": "integer",
      "mode": "stored",
      "description": "Number of delivery attempts made",
      "default": 0,
      "min": 0
    },
    {
      "name": "failureReason",
      "type": "string",
      "mode": "stored",
      "description": "Why the notification failed to deliver"
    }
  ],
  "examples": [
    {
      "@type": "UserNotification",
      "type": "security",
      "category": "account",
      "title": "New Login from Unknown Device",
      "message": "We detected a login to your account from a new device in San Francisco, CA. If this wasn't you, please secure your account immediately.",
      "priority": "high",
      "channel": "in_app",
      "status": "read",
      "sentAt": "2024-03-15T10:00:00Z",
      "deliveredAt": "2024-03-15T10:00:01Z",
      "readAt": "2024-03-15T10:05:00Z",
      "actionUrl": "/security/recent-activity",
      "actionLabel": "Review Activity",
      "data": {
        "deviceType": "Chrome on Windows",
        "location": "San Francisco, CA",
        "ipAddress": "203.0.113.42"
      }
    },
    {
      "@type": "UserNotification",
      "type": "info",
      "category": "billing",
      "title": "Your Monthly Invoice is Ready",
      "message": "Your invoice for March 2024 totaling $99.99 is now available for download. Payment will be automatically processed on April 1st.",
      "priority": "medium",
      "channel": "email",
      "status": "delivered",
      "sentAt": "2024-03-25T09:00:00Z",
      "deliveredAt": "2024-03-25T09:00:05Z",
      "expiresAt": "2024-04-25T00:00:00Z",
      "actionUrl": "/billing/invoices/2024-03",
      "actionLabel": "View Invoice",
      "data": {
        "invoiceId": "INV-2024-03-001",
        "amount": 99.99,
        "dueDate": "2024-04-01"
      }
    }
  ]
}