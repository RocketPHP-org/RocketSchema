{
  "@type": "Schema",
  "@context": "https://rocketschema.org/context",
  "name": "RateLimitConfig",
  "description": "Defines rate limiting rules to prevent API abuse and ensure fair resource usage across all consumers. Rate limiting is essential for protecting your API from being overwhelmed by too many requests, whether from legitimate heavy users, misbehaving scripts, or malicious attacks. This entity stores configurable limits that can be applied at different granularities - per user, per API key, or per IP address. Limits can be set for various time windows (requests per second, minute, hour, or day) allowing both burst tolerance and sustained usage control. For example, an API might allow 100 requests per minute with a burst of 10 requests per second. The entity supports different scopes, so you can have global limits, endpoint-specific limits, or even different limits for read versus write operations. Priority levels ensure that premium customers or critical services get higher limits. Rate limits are crucial for maintaining service stability, preventing any single consumer from monopolizing resources, and providing predictable performance for all users. They also help control costs in cloud environments where you pay for compute resources.",
  "properties": [
    {
      "name": "entityType",
      "type": "string",
      "mode": "enum",
      "description": "What type of entity this limit applies to",
      "enum": [
        "user",
        "api_key",
        "ip_address",
        "organization"
      ],
      "required": true
    },
    {
      "name": "entityId",
      "type": "string",
      "mode": "stored",
      "description": "Specific entity identifier this limit applies to",
      "required": true
    },
    {
      "name": "limitName",
      "type": "string",
      "mode": "stored",
      "description": "Descriptive name for this rate limit rule",
      "required": true,
      "example": "Standard API Rate Limit"
    },
    {
      "name": "limitType",
      "type": "string",
      "mode": "enum",
      "description": "Time window for the rate limit",
      "enum": [
        "requests_per_second",
        "requests_per_minute",
        "requests_per_hour",
        "requests_per_day",
        "requests_per_month"
      ],
      "required": true
    },
    {
      "name": "limitValue",
      "type": "integer",
      "mode": "stored",
      "description": "Maximum number of allowed requests in the time window",
      "required": true,
      "min": 0,
      "example": 1000
    },
    {
      "name": "windowSize",
      "type": "integer",
      "mode": "stored",
      "description": "Time window size in seconds",
      "required": true,
      "example": 3600
    },
    {
      "name": "burstSize",
      "type": "integer",
      "mode": "stored",
      "description": "Maximum requests allowed in a short burst",
      "default": 10
    },
    {
      "name": "algorithm",
      "type": "string",
      "mode": "enum",
      "description": "Rate limiting algorithm to use",
      "enum": [
        "token_bucket",
        "sliding_window",
        "fixed_window",
        "leaky_bucket"
      ],
      "default": "token_bucket"
    },
    {
      "name": "scope",
      "type": "string",
      "mode": "stored",
      "description": "Scope of rate limit (global, endpoint, method)",
      "default": "global",
      "example": "api.users.read"
    },
    {
      "name": "tier",
      "type": "string",
      "mode": "enum",
      "description": "Service tier this limit applies to",
      "enum": [
        "free",
        "basic",
        "premium",
        "enterprise"
      ],
      "nullable": true
    },
    {
      "name": "priority",
      "type": "integer",
      "mode": "stored",
      "description": "Priority when multiple limits apply (higher wins)",
      "default": 0
    },
    {
      "name": "responseHeaders",
      "type": "boolean",
      "mode": "stored",
      "description": "Whether to include rate limit info in response headers",
      "default": true
    },
    {
      "name": "exceedAction",
      "type": "string",
      "mode": "enum",
      "description": "What happens when limit is exceeded",
      "enum": [
        "reject",
        "throttle",
        "queue",
        "log_only"
      ],
      "default": "reject"
    },
    {
      "name": "isActive",
      "type": "boolean",
      "mode": "stored",
      "description": "Whether this rate limit is currently enforced",
      "default": true
    },
    {
      "name": "bypassTokens",
      "type": "string",
      "mode": "stored",
      "description": "Special tokens that bypass this limit",
      "nullable": true,
      "private": true
    }
  ],
  "examples": [
    {
      "@type": "RateLimitConfig",
      "entityType": "api_key",
      "entityId": "key_550e8400",
      "limitName": "Production API Standard Limit",
      "limitType": "requests_per_hour",
      "limitValue": 10000,
      "windowSize": 3600,
      "burstSize": 50,
      "algorithm": "token_bucket",
      "scope": "global",
      "tier": "premium",
      "priority": 50,
      "responseHeaders": true,
      "exceedAction": "reject",
      "isActive": true
    },
    {
      "@type": "RateLimitConfig",
      "entityType": "ip_address",
      "entityId": "203.0.113.0/24",
      "limitName": "Suspicious IP Range Throttle",
      "limitType": "requests_per_minute",
      "limitValue": 10,
      "windowSize": 60,
      "burstSize": 2,
      "algorithm": "fixed_window",
      "scope": "global",
      "priority": 100,
      "responseHeaders": false,
      "exceedAction": "throttle",
      "isActive": true
    }
  ]
}