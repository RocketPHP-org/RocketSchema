{
  "@type": "Schema",
  "@context": "https://rocketschema.org/context",
  "name": "TaxWithholding",
  "description": "Withholding tax configuration for payments to vendors, contractors, and non-residents. Defines withholding rates, types, and thresholds.",
  "properties": [
    {
      "name": "tax",
      "type": "Tax",
      "mode": "stored",
      "description": "Reference to the base Tax entity",
      "required": true
    },
    {
      "name": "withholdingType",
      "type": "string",
      "mode": "enum",
      "enum": [
        "dividends",
        "interest",
        "royalties",
        "professional_services",
        "technical_services",
        "management_fees",
        "consulting_fees",
        "rent",
        "commissions",
        "contractor_payments",
        "non_resident_services",
        "prize_winnings",
        "entertainment_payments"
      ],
      "description": "Type of payment subject to withholding",
      "required": true,
      "example": "professional_services"
    },
    {
      "name": "withholdingRate",
      "type": "number",
      "mode": "stored",
      "description": "Withholding tax rate as percentage",
      "required": true,
      "example": 15
    },
    {
      "name": "thresholdAmount",
      "type": "MonetaryAmount",
      "mode": "stored",
      "description": "Minimum payment amount for withholding to apply"
    },
    {
      "name": "isResident",
      "type": "boolean",
      "mode": "stored",
      "description": "Whether this applies to resident or non-resident recipients",
      "example": false
    },
    {
      "name": "treatyCountry",
      "type": "string",
      "mode": "stored",
      "description": "Country code if reduced rate applies due to tax treaty",
      "example": "US"
    },
    {
      "name": "treatyRate",
      "type": "number",
      "mode": "stored",
      "description": "Reduced withholding rate under tax treaty",
      "example": 10
    }
  ],
  "examples": [
    {
      "@type": "TaxWithholding",
      "tax": {
        "@type": "Tax",
        "code": "US-1099-WHT"
      },
      "withholdingType": "professional_services",
      "withholdingRate": 30,
      "isResident": false,
      "treatyCountry": "CA",
      "treatyRate": 15
    },
    {
      "@type": "TaxWithholding",
      "tax": {
        "@type": "Tax",
        "code": "FR-WHT-ROYALTIES"
      },
      "withholdingType": "royalties",
      "withholdingRate": 25,
      "thresholdAmount": {
        "value": 1000,
        "currency": "EUR"
      },
      "isResident": false
    },
    {
      "@type": "TaxWithholding",
      "tax": {
        "@type": "Tax",
        "code": "DZ-WHT-SERVICES"
      },
      "withholdingType": "technical_services",
      "withholdingRate": 24,
      "isResident": true
    }
  ]
}
